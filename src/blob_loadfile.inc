.macro LOADFILE name, bank, addr, vbank
	jsr blobopen
.if .xmatch(name,"BALLS.BIN")
	lda #$00
	sta blobseekfn+2
	lda #$00
	sta blobseekfn+3
	lda #$00
	sta blobseekfn+4
	lda #$83
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"BOUNCE.BIN")
	lda #$83
	sta blobseekfn+2
	lda #$00
	sta blobseekfn+3
	lda #$00
	sta blobseekfn+4
	lda #$83
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"CIRCLES.BIN")
	lda #$06
	sta blobseekfn+2
	lda #$01
	sta blobseekfn+3
	lda #$00
	sta blobseekfn+4
	lda #$72
	sta blob_to_read
	lda #$16
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"CIRCLES1.VTS")
	lda #$78
	sta blobseekfn+2
	lda #$17
	sta blobseekfn+3
	lda #$00
	sta blobseekfn+4
	lda #$00
	sta blob_to_read
	lda #$80
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"CIRCLES2.VTS")
	lda #$78
	sta blobseekfn+2
	lda #$97
	sta blobseekfn+3
	lda #$00
	sta blobseekfn+4
	lda #$00
	sta blob_to_read
	lda #$80
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"CRAFT.BIN")
	lda #$78
	sta blobseekfn+2
	lda #$17
	sta blobseekfn+3
	lda #$01
	sta blobseekfn+4
	lda #$83
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"CREATURE.BIN")
	lda #$fb
	sta blobseekfn+2
	lda #$17
	sta blobseekfn+3
	lda #$01
	sta blobseekfn+4
	lda #$83
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"CREDITS.BIN")
	lda #$7e
	sta blobseekfn+2
	lda #$18
	sta blobseekfn+3
	lda #$01
	sta blobseekfn+4
	lda #$97
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"CREW.BIN")
	lda #$15
	sta blobseekfn+2
	lda #$19
	sta blobseekfn+3
	lda #$01
	sta blobseekfn+4
	lda #$83
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"CUBE.BIN")
	lda #$98
	sta blobseekfn+2
	lda #$19
	sta blobseekfn+3
	lda #$01
	sta blobseekfn+4
	lda #$83
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"HEDRON.BIN")
	lda #$1b
	sta blobseekfn+2
	lda #$1a
	sta blobseekfn+3
	lda #$01
	sta blobseekfn+4
	lda #$4c
	sta blob_to_read
	lda #$18
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"HEDRONCHESS.PAL")
	lda #$67
	sta blobseekfn+2
	lda #$32
	sta blobseekfn+3
	lda #$01
	sta blobseekfn+4
	lda #$16
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"HEDRONCHESS.VBM")
	lda #$7d
	sta blobseekfn+2
	lda #$32
	sta blobseekfn+3
	lda #$01
	sta blobseekfn+4
	lda #$c0
	sta blob_to_read
	lda #$44
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"HEDRONTRILIST1.DAT")
	lda #$3d
	sta blobseekfn+2
	lda #$77
	sta blobseekfn+3
	lda #$01
	sta blobseekfn+4
	lda #$24
	sta blob_to_read
	lda #$0f
	sta blob_to_read+1
	lda #$01
	sta blob_to_read+2
.elseif .xmatch(name,"HEDRONTRILIST2.DAT")
	lda #$61
	sta blobseekfn+2
	lda #$86
	sta blobseekfn+3
	lda #$02
	sta blobseekfn+4
	lda #$50
	sta blob_to_read
	lda #$98
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"HEDRONTRILIST3.DAT")
	lda #$b1
	sta blobseekfn+2
	lda #$1e
	sta blobseekfn+3
	lda #$03
	sta blobseekfn+4
	lda #$71
	sta blob_to_read
	lda #$76
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"HEDRONTRILIST4.DAT")
	lda #$22
	sta blobseekfn+2
	lda #$95
	sta blobseekfn+3
	lda #$03
	sta blobseekfn+4
	lda #$06
	sta blob_to_read
	lda #$4c
	sta blob_to_read+1
	lda #$01
	sta blob_to_read+2
.elseif .xmatch(name,"INTRO.BIN")
	lda #$28
	sta blobseekfn+2
	lda #$e1
	sta blobseekfn+3
	lda #$04
	sta blobseekfn+4
	lda #$e0
	sta blob_to_read
	lda #$06
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"MOIRE.BIN")
	lda #$08
	sta blobseekfn+2
	lda #$e8
	sta blobseekfn+3
	lda #$04
	sta blobseekfn+4
	lda #$e8
	sta blob_to_read
	lda #$02
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"MUSIC1.ZSM")
	lda #$f0
	sta blobseekfn+2
	lda #$ea
	sta blobseekfn+3
	lda #$04
	sta blobseekfn+4
	lda #$15
	sta blob_to_read
	lda #$35
	sta blob_to_read+1
	lda #$02
	sta blob_to_read+2
.elseif .xmatch(name,"MUSIC2.ZSM")
	lda #$05
	sta blobseekfn+2
	lda #$20
	sta blobseekfn+3
	lda #$07
	sta blobseekfn+4
	lda #$7a
	sta blob_to_read
	lda #$48
	sta blob_to_read+1
	lda #$02
	sta blob_to_read+2
.elseif .xmatch(name,"MUSIC3.ZSM")
	lda #$7f
	sta blobseekfn+2
	lda #$68
	sta blobseekfn+3
	lda #$09
	sta blobseekfn+4
	lda #$5a
	sta blob_to_read
	lda #$b0
	sta blob_to_read+1
	lda #$03
	sta blob_to_read+2
.elseif .xmatch(name,"MUSIC4.ZSM")
	lda #$d9
	sta blobseekfn+2
	lda #$18
	sta blobseekfn+3
	lda #$0d
	sta blobseekfn+4
	lda #$89
	sta blob_to_read
	lda #$c4
	sta blob_to_read+1
	lda #$01
	sta blob_to_read+2
.elseif .xmatch(name,"MUSIC5.ZSM")
	lda #$62
	sta blobseekfn+2
	lda #$dd
	sta blobseekfn+3
	lda #$0e
	sta blobseekfn+4
	lda #$f1
	sta blob_to_read
	lda #$b3
	sta blob_to_read+1
	lda #$03
	sta blob_to_read+2
.elseif .xmatch(name,"PLACEHOLDER_MOIRE.PAL")
	lda #$53
	sta blobseekfn+2
	lda #$91
	sta blobseekfn+3
	lda #$12
	sta blobseekfn+4
	lda #$20
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"PLACEHOLDER_MOIRE.VBM")
	lda #$73
	sta blobseekfn+2
	lda #$91
	sta blobseekfn+3
	lda #$12
	sta blobseekfn+4
	lda #$00
	sta blob_to_read
	lda #$7d
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"PLASMA.BIN")
	lda #$73
	sta blobseekfn+2
	lda #$0e
	sta blobseekfn+3
	lda #$13
	sta blobseekfn+4
	lda #$83
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"SCROLLER.BIN")
	lda #$f6
	sta blobseekfn+2
	lda #$0e
	sta blobseekfn+3
	lda #$13
	sta blobseekfn+4
	lda #$83
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"SWORD.BIN")
	lda #$79
	sta blobseekfn+2
	lda #$0f
	sta blobseekfn+3
	lda #$13
	sta blobseekfn+4
	lda #$8b
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"SWORDBG.PAL")
	lda #$04
	sta blobseekfn+2
	lda #$10
	sta blobseekfn+3
	lda #$13
	sta blobseekfn+4
	lda #$80
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"SWORDBG.VBM")
	lda #$84
	sta blobseekfn+2
	lda #$10
	sta blobseekfn+3
	lda #$13
	sta blobseekfn+4
	lda #$00
	sta blob_to_read
	lda #$fa
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"TITLEBG.PAL")
	lda #$84
	sta blobseekfn+2
	lda #$0a
	sta blobseekfn+3
	lda #$14
	sta blobseekfn+4
	lda #$20
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"TITLEBG.VTS")
	lda #$a4
	sta blobseekfn+2
	lda #$0a
	sta blobseekfn+3
	lda #$14
	sta blobseekfn+4
	lda #$00
	sta blob_to_read
	lda #$ca
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"TITLECARD.PAL")
	lda #$a4
	sta blobseekfn+2
	lda #$d4
	sta blobseekfn+3
	lda #$14
	sta blobseekfn+4
	lda #$20
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"TITLECARD.VBM")
	lda #$c4
	sta blobseekfn+2
	lda #$d4
	sta blobseekfn+3
	lda #$14
	sta blobseekfn+4
	lda #$00
	sta blob_to_read
	lda #$7d
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"TITLEFONT.PAL")
	lda #$c4
	sta blobseekfn+2
	lda #$51
	sta blobseekfn+3
	lda #$15
	sta blobseekfn+4
	lda #$08
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"TITLEFONT.VTS")
	lda #$cc
	sta blobseekfn+2
	lda #$51
	sta blobseekfn+3
	lda #$15
	sta blobseekfn+4
	lda #$00
	sta blob_to_read
	lda #$5d
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"TUNCOORDS.BIN")
	lda #$cc
	sta blobseekfn+2
	lda #$ae
	sta blobseekfn+3
	lda #$15
	sta blobseekfn+4
	lda #$00
	sta blob_to_read
	lda #$40
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"TUNNEL.BIN")
	lda #$cc
	sta blobseekfn+2
	lda #$ee
	sta blobseekfn+3
	lda #$15
	sta blobseekfn+4
	lda #$8d
	sta blob_to_read
	lda #$04
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.elseif .xmatch(name,"WATER.BIN")
	lda #$59
	sta blobseekfn+2
	lda #$f3
	sta blobseekfn+3
	lda #$15
	sta blobseekfn+4
	lda #$83
	sta blob_to_read
	lda #$00
	sta blob_to_read+1
	lda #$00
	sta blob_to_read+2
.else
.error "LOADFILE macro expansion failed"
.endif
	jsr blobseek
	lda #bank
	sta X16::Reg::RAMBank
	ldx #<addr
	ldy #>addr
.ifnblank vbank
	lda #(vbank + 2)
.else
	lda #0
.endif
	jsr blobload
.endmacro
